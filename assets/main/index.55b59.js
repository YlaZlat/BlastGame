window.__require=function e(t,i,s){function o(l,r){if(!i[l]){if(!t[l]){var h=l.split("/");if(h=h[h.length-1],!t[h]){var c="function"==typeof __require&&__require;if(!r&&c)return c(h,!0);if(n)return n(h,!0);throw new Error("Cannot find module '"+l+"'")}l=h}var a=i[l]={exports:{}};t[l][0].call(a.exports,function(e){return o(t[l][1][e]||e)},a,a.exports,e,t,i,s)}return i[l].exports}for(var n="function"==typeof __require&&__require,l=0;l<s.length;l++)o(s[l]);return o}({"BusterBombController ":[function(e,t,i){"use strict";cc._RF.push(t,"8ed36qKewlErLj+97Nf/gxD","BusterBombController ");var s=e("BusterProtoController"),o=e("BusterBombModel"),n=e("BusterBombViev");cc.Class({extends:s,properties:{viev:{default:null,type:n,override:!0}},onLoad:function(){this._super(),this.model=new o(this,this.viev),this.model.init(),this.bomb=null,this.fieldNode=this.viev.fieldNode},onBusterClick:function(){this.game.state.game&&this.model.buyBomb()&&(this.offStandartGameEvents(),this.game.node.on(this.mousemove,this.onMouseMove,this),this.fieldNode.on(this.mousedown,this.onFieldMouseDown,this))},onMouseMove:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation());this.model.bomb.setPosition(t)},onFieldMouseDown:function(e){if(e.target!==e.currentTarget){this.game.node.off(this.mousemove,this.onMouseMove,this),this.fieldNode.off(this.mousedown,this.onFieldMouseDown,this),e.stopPropagation();var t=e.target;this.model.onFieldBombDown(t)}}}),cc._RF.pop()},{BusterBombModel:"BusterBombModel",BusterBombViev:void 0,BusterProtoController:"BusterProtoController"}],BusterBombModel:[function(e,t,i){"use strict";cc._RF.push(t,"c58fa6c1pZD6aOLWLLCcBQ8","BusterBombModel");var s=e("BusterProtoModel"),o=cc.Class({extends:s,ctor:function(e,t){this.viev=t,this.controller=e,this.passingModel=this.controller.passingModel,this.fieldModel=this.controller.fieldModel,this.cost=100},buyBomb:function(){if(!(this.passingModel.coins<this.cost))return this.passingModel.changeCoins(-this.cost),this.bomb=this.viev.spawnBomb(),this.bomb},despawnBomb:function(){this.viev.despawnBomb(this.bomb),this.bomb=null},onFieldBombDown:function(e){var t=this;this.despawnBomb();var i=this.getExplosionGroup(e);this.fieldModel.despawnSprites(i),this.createExplosins(i);this.rebuildField=this.fieldModel.rebuildField.bind(this.fieldModel),setTimeout(function(){t.rebuildField()},500)},getExplosionGroup:function(e){var t=this.fieldModel.findNeighborsSprites(e);return t.push(e),t},createExplosins:function(e){for(var t=0;t<e.length;t++){var i=e[t],s=i.cell.position,o=i.cell.number+1,n=i.cell.width;this.viev.createExplosin(s,o,n),this.fieldModel.getSpriteCell(i).sprite=null}}});t.exports=o,cc._RF.pop()},{BusterProtoModel:"BusterProtoModel"}],"BusterBombViev ":[function(e,t,i){"use strict";cc._RF.push(t,"29c045qxQVHw7StDY7ZjAxK","BusterBombViev ");var s=e("BusterProtoViev");cc.Class({extends:s,properties:{costLabel:{default:null,type:cc.Label,override:!0},bombLabel:{default:null,type:cc.Node},bombPrefab:{default:null,type:cc.Prefab},explosionPrefab:{default:null,type:cc.Prefab},fieldNode:{default:null,type:cc.Node}},onLoad:function(){this.bombPool=new cc.NodePool;var e=cc.instantiate(this.bombPrefab);this.bombPool.put(e),this.explosionPool=new cc.NodePool;for(var t=0;t<5;++t){var i=cc.instantiate(this.explosionPrefab);this.explosionPool.put(i)}},spawnExplosion:function(){return this.explosionPool.size()>0?this.explosionPool.get():cc.instantiate(this.explosionPrefab)},despawnExplosionBomb:function(e){this.explosionPool.put(e)},createExplosin:function(e,t,i){var s=this.spawnExplosion();s.getComponent("ExplosionAnim").init(this),this.fieldNode.addChild(s),expSprite=s.getChildByName("explosion"),s.zIndex=t,expSprite.width=i,expSprite.height=i,s.setPosition(e)},spawnBomb:function(){var e=this.bombPool.get(this);return this.node.addChild(e),e.zIndex=500,e.position=this.bombLabel.position,e},despawnBomb:function(e){this.bombPool.put(e)}}),cc._RF.pop()},{BusterProtoViev:"BusterProtoViev"}],BusterMixController:[function(e,t,i){"use strict";cc._RF.push(t,"0718fhiEgBKbLxJ4wvAeHE8","BusterMixController");var s=e("BusterProtoController"),o=e("BusterMixModel"),n=e("BusterMixViev");cc.Class({extends:s,properties:{viev:{default:null,type:n,override:!0}},onLoad:function(){this._super(),this.model=new o(this,this.viev),this.model.init()}}),cc._RF.pop()},{BusterMixModel:"BusterMixModel",BusterMixViev:"BusterMixViev",BusterProtoController:"BusterProtoController"}],BusterMixModel:[function(e,t,i){"use strict";cc._RF.push(t,"2e334v1mOhNo5ppTQhW+icD","BusterMixModel");var s=e("BusterProtoModel"),o=cc.Class({extends:s,ctor:function(e,t){this.viev=t,this.controller=e,this.passingModel=this.controller.passingModel,this.fieldModel=this.controller.fieldModel,this.cost=70},buyBuster:function(){this.passingModel.coins<this.cost||(this.passingModel.changeCoins(-this.cost),this.mix())},mix:function(){for(var e=this.fieldModel.getVisibleCells(),t=[],i=0;i<e.length;i++){var s=e[i].sprite;t.push(s)}t.sort(function(){return Math.random()-.5});for(var o=0;o<e.length;o++){var n=e[o],l=t[o];this.fieldModel.setSpriteToCell(n,l)}}});t.exports=o,cc._RF.pop()},{BusterProtoModel:"BusterProtoModel"}],BusterMixViev:[function(e,t,i){"use strict";cc._RF.push(t,"16782g0ekxIqLtz06Aha58R","BusterMixViev");var s=e("BusterProtoViev");cc.Class({extends:s,properties:{costLabel:{default:null,type:cc.Label,override:!0}}}),cc._RF.pop()},{BusterProtoViev:"BusterProtoViev"}],BusterMoveController:[function(e,t,i){"use strict";cc._RF.push(t,"72a548tmPVBmayP+eceMmGH","BusterMoveController");var s=e("BusterProtoController"),o=e("BusterMoveModel"),n=e("BusterMoveViev");cc.Class({extends:s,properties:{viev:{default:null,type:n,override:!0}},onLoad:function(){this._super(),this.model=new o(this,this.viev),this.model.init()}}),cc._RF.pop()},{BusterMoveModel:"BusterMoveModel",BusterMoveViev:"BusterMoveViev",BusterProtoController:"BusterProtoController"}],BusterMoveModel:[function(e,t,i){"use strict";cc._RF.push(t,"da1b5Pq/LtJHJxVPtPsysTO","BusterMoveModel");var s=e("BusterProtoModel"),o=cc.Class({extends:s,ctor:function(e,t){this.viev=t,this.controller=e,this.passingModel=this.controller.passingModel,this.fieldModel=this.controller.fieldModel,this.cost=50},buyBuster:function(){this.passingModel.coins<this.cost||(this.passingModel.changeMovies(1),this.passingModel.changeCoins(-this.cost))}});t.exports=o,cc._RF.pop()},{BusterProtoModel:"BusterProtoModel"}],BusterMoveViev:[function(e,t,i){"use strict";cc._RF.push(t,"66e8f9AvTBGB4/IUbVhBw1U","BusterMoveViev");var s=e("BusterProtoViev");cc.Class({extends:s,properties:{costLabel:{default:null,type:cc.Label,override:!0}}}),cc._RF.pop()},{BusterProtoViev:"BusterProtoViev"}],BusterProtoController:[function(e,t,i){"use strict";cc._RF.push(t,"0c4a8KHdwBIkqX2CNiRbl8S","BusterProtoController");var s=e("GameController"),o=e("BusterProtoModel"),n=e("BusterProtoViev"),l=cc.Class({extends:cc.Component,properties:{game:{default:null,type:s},viev:{default:null,type:n}},onLoad:function(){this.mousedown=this.game.mousedown,this.mouseup=this.game.mouseup,this.mousemove=this.game.mousemove,this.mouseleave=this.game.mouseleave,this.passingModel=this.game.passingModel,this.fieldModel=this.game.fieldModel,this.model=new o(this,this.viev),this.model.init(),this.onBusterEvent()},offStandartGameEvents:function(){this.game.offGame()},onStandartGameEvents:function(){this.game.onGame()},onBusterEvent:function(){this.node.on(this.mousedown,this.onBusterMouseDown,this),this.node.on("click",this.onBusterClick,this)},offBusterEvent:function(){this.node.off(this.mousedown,this.onBusterMouseDown,this),this.node.off("click",this.onBusterClick,this)},onBusterClick:function(){this.game.state.game&&this.model.buyBuster()},onBusterMouseDown:function(){if(this.game.state.game)return this.passingModel.coins<this.model.cost?(this.model.setCostWarningColor(),this.node.on(this.mouseup,this.onBusterMouseUp,this),void this.node.on(this.mouseleave,this.onBusterMouseUp,this)):void 0},onBusterMouseUp:function(){this.model.setCostNormalColor(),this.node.off(this.mouseup,this.onBusterMouseUp,this),this.node.off(this.mouseleave,this.onBusterMouseUp,this)}});t.exports=l,cc._RF.pop()},{BusterProtoModel:"BusterProtoModel",BusterProtoViev:"BusterProtoViev",GameController:"GameController"}],BusterProtoModel:[function(e,t,i){"use strict";cc._RF.push(t,"40159aY/pBJP6VA81Qx1res","BusterProtoModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.controller=e,this.passingModel=this.controller.passingModel,this.fieldModel=this.controller.fieldModel,this.cost=10},init:function(){this.viev.displayCost(this.cost),this.viev.setCostLabelNormalColor(),this.viev.enable()},setCostNormalColor:function(){this.viev.setCostLabelNormalColor()},setCostWarningColor:function(){this.viev.setCostLabelWarningColor()},buyBuster:function(){cc.log("\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0438\u0442\u0435 \u043c\u0435\u0442\u043e\u0434!"),this.passingModel.coins,this.cost}});t.exports=s,cc._RF.pop()},{}],BusterProtoViev:[function(e,t,i){"use strict";cc._RF.push(t,"2de9fGMi0NHTYL/jd1EtIOX","BusterProtoViev");var s=cc.Class({extends:cc.Component,properties:{costLabel:{default:null,type:cc.Label},costLabelNormalColor:cc.Color.WHITE,costLabelWarningColor:cc.Color.RED},enable:function(){this.node.active=!0},setCostLabelNormalColor:function(){this.costLabel.node.color=this.costLabelNormalColor},setCostLabelWarningColor:function(){this.costLabel.node.color=this.costLabelWarningColor},displayCost:function(e){this.costLabel.string=e+""}});t.exports=s,cc._RF.pop()},{}],ExplosionAnim:[function(e,t,i){"use strict";cc._RF.push(t,"5218aWswGhAA5vgQVw/dxt8","ExplosionAnim"),cc.Class({extends:cc.Component,properties:{},init:function(e){this.game=e;var t=this.node.getComponent(cc.Animation).play("explosionAnimation");this.duration=t.duration},despawn:function(){this.game.despawnExplosionBomb(this.node)}}),cc._RF.pop()},{}],FieldModel:[function(e,t,i){"use strict";cc._RF.push(t,"ad0deqf0cRPvoyEKPhsbnfs","FieldModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.viev.model=this,this.controller=e,this.initHeight,this.height,this.width,this.frameWidth,this.cubeFormat,this.fallingSpeed,this.spriteTextures;var i=this.viev.getInitRenderFieldParameters();this.setInitRenderFieldParameters(i),this.loverLeftInnerPoint=cc.v2(this.frameWidth,this.frameWidth),this.spriteOverlay={x:1,y:.92},this.minRowLength=3,this.maxRowLength=15,this.cellSize={},this.cellSize.width,this.cellSize.height,this.rowLength,this.initRowLength=8,this.currentRowLength,this.rowNum,this.fieldCells=[],this.sameColorGroup=[],this.currentMaxFallHaight=0,this.maxFallTime=0},init:function(){this.passingModel=this.controller.passingModel,this.getSpriteCell=this.getSpriteCell.bind(this)},getVisibleCells:function(){for(var e=this.fieldCells,t=[],i=0;i<e.length/2;i++)for(var s=0;s<e[i].length;s++){var o=e[i][s];t.push(o)}return t},setRandomTexture:function(e){var t=Math.floor(Math.random()*this.spriteTextures.length),i=this.spriteTextures[t];return e.color=t,this.viev.setTexture(e,i),t},setTexture:function(e,t){var i=this.spriteTextures[t];return this.viev.setTexture(e,i),e.color=t,t},setInitRenderFieldParameters:function(e){this.initHeight=e.height,this.height=this.initHeight,this.width=e.width,this.frameWidth=e.frameWidth,this.cubeFormat=e.cubeFormat,this.fallingSpeed=e.fallingSpeed,this.spriteTextures=e.spriteTextures},createField:function(e){this.viev.deleteAllCubeSprite(),this.setRowLength(e),this.viev.createCubesPool(2*this.cellsNum),this.createFieldCells(),this.fillFieldWithSprites()},setRowLength:function(e){this.height=this.initHeight,this.rowLength=e,this.currentRowLength=this.rowLength;var t=this.width-2*this.frameWidth,i=this.height-2*this.frameWidth;this.cellSize.width=t/e,this.cellSize.height=this.cellSize.width/this.cubeFormat,this.rowNum=Math.floor(i/(this.cellSize.height*this.spriteOverlay.y)),this.cellsNum=this.rowNum*e;var s=i-this.cellSize.height*this.spriteOverlay.y*this.rowNum;this.height-=s,this.viev.setFieldSize(this.width,this.height),this.viev.setFrameZIndex(this.cellsNum),this.passingModel.setLevelProgressPosition(0,this.height,2*this.cellsNum+1)},createFieldCells:function(){this.fieldCells=[];for(var e=0,t=1,i=this.cellSize.width/2,s=this.cellSize.height/2,o=0;o<2*this.rowNum;o++){var n=[];o==this.rowNum&&(e=this.frameWidth);for(var l=0;l<this.rowLength;l++){var r={};r.width=this.cellSize.width,r.height=this.cellSize.height,r.position=cc.v2(this.loverLeftInnerPoint.x+i+l*this.cellSize.width*this.spriteOverlay.x,this.loverLeftInnerPoint.y+s+o*this.cellSize.height*this.spriteOverlay.y+e),r.row=o,r.col=l,r.number=t,r.sprite=null,n.push(r),t++}this.fieldCells.push(n)}},setSpriteToCell:function(e,t){this.viev.setSpriteToCell(e,t),e.sprite=t,t.fallHeight=0,t.cell=e},fillFieldWithSprites:function(){for(var e=this.fieldCells,t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++){var s=e[t][i];if(!s.sprite){var o=this.viev.spawnNewCubeSprite();this.setRandomTexture(o),this.setSpriteToCell(s,o),o.on(this.controller.mousedown,function(){})}}},findNeighborsSprites:function(e){var t=this.fieldCells,i=this.rowLength,s=this.rowNum,o=e.cell,n=o.col,l=o.row,r=[];return n!==i-1&&t[l][n+1].sprite&&r.push(t[l][n+1].sprite),n&&t[l][n-1].sprite&&r.push(t[l][n-1].sprite),l!==s-1&&t[l+1][n].sprite&&r.push(t[l+1][n].sprite),l&&t[l-1][n].sprite&&r.push(t[l-1][n].sprite),r},getSpriteCell:function(e){var t=this.fieldCells,i=e.cell;if(i){var s=i.col;return t[i.row][s]}},searchSameColorGroup:function(e){var t=[e],i=e.colorName;function s(e){var o=this;this.findNeighborsSprites(e).forEach(function(e){e.colorName===i&&(t.push(e),o.getSpriteCell(e).sprite=null,s(e))})}(this.getSpriteCell(e).sprite=null,(s=s.bind(this))(e),t.length<2)&&(this.getSpriteCell(t[0]).sprite=t[0]);return this.sameColorGroup=t,this.sameColorGroup},checkFieldForEmptyCells:function(){var e=this.fieldCells;function t(e){for(var t=!1,i=1;i<e.length;i++)for(var s=0;s<e[i].length;s++){var o=e[i][s],n=e[i-1][s];o.sprite&&(n.sprite||(t=!0,n.sprite=o.sprite,o.sprite=null,n.sprite.fallHeight++,n.sprite.cell=n,n.sprite.fallHeight>this.currentMaxFallHaight&&(this.currentMaxFallHaight=n.sprite.fallHeight)))}return t}for(t=t.bind(this);t(e);)t(e)},wiggle:function(e){this.viev.wiggle(e)},onFinishWiggle:function(){this.controller.onFinishRebuild()},dumping:function(){var e=this.fieldCells;this.maxFallTime=this.fallingSpeed*this.currentMaxFallHaight/(this.currentMaxFallHaight,2);for(var t=0;t<e.length;t++)for(var i=0;i<e[t].length;i++){var s=e[t][i].sprite,o=e[t][i];if(s&&s.fallHeight){var n=this.fallingSpeed*s.fallHeight/(s.fallHeight,2);s.fallHeight=0,this.viev.cubeFallTo(s,o.position,n),this.viev.setCubeSpriteZIndex(s,o.number)}}},rebuildField:function(){var e=this;this.checkFieldForEmptyCells(),this.dumping(),setTimeout(function(){e.currentMaxFallHaight=0,e.maxFallTime=0,e.fillFieldWithSprites(),e.controller.onFinishRebuild()},1e3*this.maxFallTime)},despawnSprites:function(e){for(var t=0;t<e.length;t++)this.viev.despawnCubeSprite(e[t])},onMouseDown:function(e){if(!(e.number>this.cellsNum)){var t=e.cell.position,i=this.searchSameColorGroup(e);i.length<2?this.wiggle(e):(this.despawnSprites(i),this.rebuildField(),this.passingModel.gainScore(i.length,t,2*this.cellsNum))}}});t.exports=s,cc._RF.pop()},{}],FieldViev:[function(e,t,i){"use strict";cc._RF.push(t,"c46dc+4CAJFwIYTjqZ1jvow","FieldViev"),cc.Class({extends:cc.Component,properties:{spriteTextures:{default:[],type:[cc.SpriteFrame]},cubePrefab:{default:null,type:cc.Prefab},fieldFrame:{default:null,type:cc.Node},blackRect:{default:null,type:cc.Node},cubeFormat:{default:357/402,tooltip:"The ratio of the width of the sprite to its height (default: 357/402)"},fallingSpeed:.25},init:function(e){this.gameController=e,this.getInitRenderFieldParameters()},setFieldSize:function(e,t){this.node.width=e,this.node.height=t,this.fieldFrame.height=this.node.height,this.fieldFrame.width=this.node.width,this.createBlackRect()},setFrameZIndex:function(e){this.fieldFrame.zIndex=e,this.blackRect.zIndex=e},createCubesPool:function(e){this.cubesPool=new cc.NodePool;for(var t=0;t<e;++t){var i=cc.instantiate(this.cubePrefab);this.cubesPool.put(i)}},getInitRenderFieldParameters:function(){return{height:this.node.height,width:this.node.width,frameWidth:.025*this.node.width,cubeFormat:this.cubeFormat,fallingSpeed:this.fallingSpeed,spriteTextures:this.spriteTextures}},createBlackRect:function(){var e=this.blackRect.getComponent(cc.Graphics);e.clear(),e.rect(0,this.node.height,this.node.width,this.node.height),e.fillColor=cc.Color.BLACK,e.fill()},getTexture:function(e){return e.getComponent(cc.Sprite).spriteFrame},setTexture:function(e,t){return!(!t instanceof cc.SpriteFrame)&&(e.getComponent(cc.Sprite).spriteFrame=t,e.colorName=t.name,t)},spawnNewCubeSprite:function(){var e=null;return e=this.cubesPool.size()>0?this.cubesPool.get():cc.instantiate(this.cubePrefab),this.node.getChildByName("cubes").addChild(e),e},setSpriteToCell:function(e,t){t.setPosition(e.position),t.width=e.width,t.height=e.height,t.zIndex=e.number},despawnCubeSprite:function(e){this.cubesPool.put(e)},deleteAllCubeSprite:function(){this.node.getChildByName("cubes").removeAllChildren()},cubeFallTo:function(e,t,i){cc.tween(e).to(i,{position:t},{easing:"sineIn"}).start()},setCubeSpriteZIndex:function(e,t){e.zIndex=t},wiggle:function(e){var t=this;cc.tween(e).by(.1,{scale:-.15,angle:-20}).by(.1,{scale:.15,angle:20}).call(function(){t.model.onFinishWiggle()}).start()}}),cc._RF.pop()},{}],GameController:[function(e,t,i){"use strict";cc._RF.push(t,"3dd53sRmYZNVq7GTCwOeTBi","GameController");var s=e("FieldModel"),o=e("FieldViev"),n=e("PassingModel"),l=e("PassingViev"),r=e("MainMenuViev"),h=e("MainMenuModel"),c=e("GameOverMenuViev"),a=e("GameOverMenuModel"),u=e("NextLevelMenuViev"),d=e("NextLevelMenuModel");cc.Class({extends:cc.Component,properties:{fieldViev:{default:null,type:o},passingViev:{default:null,type:l},mainMenuViev:{default:null,type:r},gameOverMenuViev:{default:null,type:c},nextLevelMenuViev:{default:null,type:u}},onLoad:function(){this.state={game:!1,mainMenu:!0,nextLevel:!1,gameOver:!1},Object.defineProperty(this.state,"resetState",{value:function(){for(state in this)this[state]=!1},enumerable:!1}),this.mousedown="mousedown",this.mouseup="mouseup",this.mousemove="mousemove",this.mouseleave="mouseleave",this.mouseleave="mouseleave",cc.sys.platform===cc.sys.MOBILE_BROWSER&&(this.mousedown="touchstart",this.mouseup="touchend",this.mousemove="touchmove",this.mouseleave="touchcancel"),this.fieldModel=new s(this,this.fieldViev),this.passingModel=new n(this,this.passingViev),this.mainMenuModel=new h(this,this.mainMenuViev),this.nextLevelMenuModel=new d(this,this.nextLevelMenuViev),this.gameOverMenuModel=new a(this,this.gameOverMenuViev),this.fieldModel.init(),this.passingModel.init(),this.mainMenuModel.init(),this.gameOverMenuModel.init(),this.nextLevelMenuModel.init()},start:function(){this.fieldModel.createField(this.fieldModel.initRowLength),this.fieldModel.getVisibleCells(),this.onMainMenu(),this.gameOverMenuModel.disable(),this.nextLevelMenuModel.disable()},onGame:function(){this.state.resetState(),this.state.game=!0,this.onGameEvent()},offGame:function(){this.state.resetState(),this.offGameEvent()},onMainMenu:function(){this.state.resetState(),this.state.mainMenu=!0,this.offGameEvent(),this.mainMenuModel.enable(),this.onMainMenuEvent()},onNextLevel:function(){this.state.resetState(),this.state.nextLevel=!0,this.offGameEvent(),this.passingModel.increaseLevel(),this.nextLevelMenuModel.enable(),this.onNextLevelMenuEvent()},onGameOver:function(){this.state.resetState(),this.state.gameOver=!0,this.offGameEvent(),this.gameOverMenuModel.enable(),this.onGameOverMenuEvent()},onGameEvent:function(){this.fieldViev.node.on(this.mousedown,this.gameOnMouseDown,this)},offGameEvent:function(){this.fieldViev.node.off(this.mousedown,this.gameOnMouseDown,this)},onMainMenuEvent:function(){this.mainMenuViev.slider.node.on("slide",this.mainMenuOnSlider,this),this.mainMenuViev.playButton.node.on("click",this.mainMenuOnButtonClick,this)},onNextLevelMenuEvent:function(){this.nextLevelMenuViev.playButton.node.on("click",this.nextLevelMenuOnButtonClick,this)},onGameOverMenuEvent:function(){this.gameOverMenuViev.playButton.node.on("click",this.gameOverMenuOnButtonClick,this)},gameOnMouseDown:function(e){if(e.target!==e.currentTarget){e.stopPropagation(),this.offGameEvent();var t=e.target;this.fieldModel.onMouseDown(t)}},onFinishRebuild:function(){this.onGameEvent(),this.state.game=!0,this.state.nextLevel&&this.onNextLevel(),this.state.gameOver&&this.onGameOver()},mainMenuOnButtonClick:function(){this.fieldModel.currentRowLength!==this.fieldModel.rowLength&&this.fieldModel.createField(this.fieldModel.currentRowLength),this.mainMenuModel.disable(),this.passingModel.resetGame(),this.onGame()},mainMenuOnSlider:function(e){this.mainMenuModel.onSlider(e)},nextLevelMenuOnButtonClick:function(){this.nextLevelMenuModel.disable(),this.passingModel.resetLevelScore(),this.onGame()},gameOverMenuOnButtonClick:function(){this.gameOverMenuModel.disable(),this.passingModel.resetGame(),this.onGame()}}),cc._RF.pop()},{FieldModel:"FieldModel",FieldViev:"FieldViev",GameOverMenuModel:"GameOverMenuModel",GameOverMenuViev:"GameOverMenuViev",MainMenuModel:"MainMenuModel",MainMenuViev:"MainMenuViev",NextLevelMenuModel:"NextLevelMenuModel",NextLevelMenuViev:"NextLevelMenuViev",PassingModel:"PassingModel",PassingViev:"PassingViev"}],GameOverMenuModel:[function(e,t,i){"use strict";cc._RF.push(t,"e44b6iYDnVMHrsF/9jKXeIe","GameOverMenuModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.controller=e},init:function(){this.disable()},enable:function(){this.viev.enable()},disable:function(){this.viev.disable()}});t.exports=s,cc._RF.pop()},{}],GameOverMenuViev:[function(e,t,i){"use strict";cc._RF.push(t,"23bf5Jy9edPk7ybnYnLmZHx","GameOverMenuViev"),cc.Class({extends:cc.Component,properties:{playButton:{default:null,type:cc.Button}},enable:function(){this.node.active=!0},disable:function(){this.node.active=!1}}),cc._RF.pop()},{}],MainMenuModel:[function(e,t,i){"use strict";cc._RF.push(t,"ec65fHAvNFNTK6Lr7ULVpVm","MainMenuModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.controller=e,this.fieldModel=this.controller.fieldModel},init:function(){},onSlider:function(e){var t=this.fieldModel.minRowLength,i=this.fieldModel.maxRowLength,s=t+Math.floor((i-t)*e.progress);this.viev.displayNumberOfCubes(s),this.fieldModel.currentRowLength=s},setCurrentSliderProgres:function(){var e=this.fieldModel.minRowLength,t=this.fieldModel.maxRowLength,i=this.fieldModel.rowLength,s=(i-e)/(t-e);this.viev.displaySliderProgress(s),this.viev.displayNumberOfCubes(i)},enable:function(){this.viev.enable(),this.setCurrentSliderProgres()},disable:function(){this.viev.disable()}});t.exports=s,cc._RF.pop()},{}],MainMenuViev:[function(e,t,i){"use strict";cc._RF.push(t,"67028o2+IJJnIxBjh4Hyxwn","MainMenuViev"),cc.Class({extends:cc.Component,properties:{levelLabel:{default:null,type:cc.Label},numberOfCubesLabel:{default:null,type:cc.Label},field:{default:null,type:cc.Node},slider:{default:null,type:cc.Slider},playButton:{default:null,type:cc.Button}},enable:function(){this.node.active=!0},disable:function(){this.node.active=!1},displayNumberOfCubes:function(e){this.numberOfCubesLabel.string=e+""},displaySliderProgress:function(e){this.slider.progress=e}}),cc._RF.pop()},{}],NextLevelMenuModel:[function(e,t,i){"use strict";cc._RF.push(t,"3e32fctO7tLYLY62pGFOXl0","NextLevelMenuModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.controller=e},init:function(){this.passingModel=this.controller.passingModel,this.disable()},enable:function(){var e=this.passingModel.level,t=this.passingModel.requiredLevelScore,i=this.passingModel.initMovies,s=this.passingModel.levelCoins;this.viev.displaylevelInformation(e,t,i),this.viev.displayWonCoins(s),this.viev.enable()},disable:function(){this.viev.disable()}});t.exports=s,cc._RF.pop()},{}],NextLevelMenuViev:[function(e,t,i){"use strict";cc._RF.push(t,"e5a4aiLayFHp6T8zYXeJ+3P","NextLevelMenuViev"),cc.Class({extends:cc.Component,properties:{levelInformation:{default:null,type:cc.Label},wonCoinsLabel:{default:null,type:cc.Label},playButton:{default:null,type:cc.Button}},enable:function(){this.node.active=!0},disable:function(){this.node.active=!1},displaylevelInformation:function(e,t,i){this.levelInformation.string="Level "+e+"\n Score "+t+" points in "+i+" movies!"},displayWonCoins:function(e){this.wonCoinsLabel.string="+ "+e+" coins!"}}),cc._RF.pop()},{}],PassingModel:[function(e,t,i){"use strict";cc._RF.push(t,"722fasBoDlJpqGw4WW1KlB/","PassingModel");var s=cc.Class({ctor:function(e,t){this.viev=t,this.controller=e,this.fieldModel=this.controller.fieldModel,this.initLivel=1,this.initMovies=10,this.initRequiredLevelScore=50,this.increasRequiredLevelScore=50,this.levelScore=0,this.coins=0,this.levelCoins=0,this.totalScore=0,this.moveCost=50,this.level=this.initLivel,this.movies=this.initMovies,this.requiredLevelScore=this.initRequiredLevelScore+(this.level-this.initLivel)*this.increasRequiredLevelScore},init:function(){this.displayAll()},displayAll:function(){this.viev.displayMovies(this.movies),this.viev.displayLevelSore(this.levelScore,this.requiredLevelScore),this.viev.displayTotalSore(this.totalScore),this.viev.displayLevel(this.level),this.viev.displayCoins(this.coins)},setLevelProgressPosition:function(e,t,i){this.viev.setLevelProgressPosition(e,t,i)},resetLevelScore:function(){this.levelScore=0,this.levelCoins=0,this.movies=this.initMovies,this.viev.displayMovies(this.movies),this.viev.displayLevelSore(this.levelScore,this.requiredLevelScore),this.viev.displayTotalSore(this.totalScore),this.viev.displayLevel(this.level),this.viev.displayCoins(this.coins)},resetGame:function(){this.level=this.initLivel,this.movies=this.initMovies,this.requiredLevelScore=this.initRequiredLevelScore,this.coins=0,this.levelScore=0,this.levelCoins=0,this.totalScore=0,this.displayAll()},changeMovies:function(e){this.movies+=e,this.viev.displayMovies(this.movies)},changeCoins:function(e){e>0&&(this.levelCoins+=e),this.coins+=e,this.viev.displayCoins(this.coins)},gainScore:function(e,t,i){this.levelScore+=e*e,this.totalScore+=e*e,this.movies--,this.viev.displayMovies(this.movies),this.viev.displayLevelSore(this.levelScore,this.requiredLevelScore),this.viev.displayTotalSore(this.totalScore),this.viev.creareScoreAnim(e,t,i),this.levelScore<this.requiredLevelScore&&this.movies<1&&(this.controller.state.gameOver=!0),this.levelScore>=this.requiredLevelScore&&(this.controller.state.nextLevel=!0)},increaseLevel:function(){var e=this.movies*this.moveCost+this.levelScore-this.requiredLevelScore;this.levelCoins+=e,this.coins+=e,this.level++,this.requiredLevelScore=this.initRequiredLevelScore+(this.level-this.initLivel)*this.increasRequiredLevelScore}});t.exports=s,cc._RF.pop()},{}],PassingViev:[function(e,t,i){"use strict";cc._RF.push(t,"60564shGtBDsaHIvYYaxq2r","PassingViev"),cc.Class({extends:cc.Component,properties:{levelScoreDisplay:{default:null,type:cc.Label},moviesDisplay:{default:null,type:cc.Label},totalScoreDisplay:{default:null,type:cc.Label},coinsNumDisplay:{default:null,type:cc.Label},levelProgress:{default:null,type:cc.Node},progressBar:{default:null,type:cc.ProgressBar},levelLabel:{default:null,type:cc.Label},scoreFXPrefab:{default:null,type:cc.Prefab},field:{default:null,type:cc.Node}},start:function(){this.node.position=this.field.position,this.scorePool=new cc.NodePool},displayLevelSore:function(e,t){this.levelScoreDisplay.string="Score: \n"+e+"/"+t,this.progressBar.progress=e/t},displayTotalSore:function(e){this.totalScoreDisplay.string=e},displayMovies:function(e){this.moviesDisplay.string=e},displayLevel:function(e){this.levelLabel.string="Level: "+e},displayCoins:function(e){this.coinsNumDisplay.string=e.toString()},setLevelProgressPosition:function(e,t,i){this.levelProgress.x=e,this.levelProgress.y=t,this.levelProgress.zIndex=i},spawnScoreFX:function(){return this.scorePool.size()>0?this.scorePool.get():cc.instantiate(this.scoreFXPrefab)},creareScoreAnim:function(e,t,i){var s=this.spawnScoreFX();this.node.addChild(s),s.getComponent("ScoreAnim").init(this),s.zIndex=i,s.setPosition(t),s.getComponent("ScoreAnim").label.string="+"+e+"x"+e,s.getComponent(cc.Animation).play()},despawnScoreFX:function(e){this.scorePool.put(e)}}),cc._RF.pop()},{}],ScoreAnim:[function(e,t,i){"use strict";cc._RF.push(t,"878f1phGrNDtYPTzPbNwRJK","ScoreAnim"),cc.Class({extends:cc.Component,properties:{label:{default:null,type:cc.Label}},init:function(e){this.game=e},despawn:function(){this.game.despawnScoreFX(this.node)}}),cc._RF.pop()},{}]},{},["BusterBombController ","BusterBombModel","BusterBombViev ","BusterMixController","BusterMixModel","BusterMixViev","BusterMoveController","BusterMoveModel","BusterMoveViev","BusterProtoController","BusterProtoModel","BusterProtoViev","ExplosionAnim","FieldModel","FieldViev","GameController","GameOverMenuModel","GameOverMenuViev","MainMenuModel","MainMenuViev","NextLevelMenuModel","NextLevelMenuViev","PassingModel","PassingViev","ScoreAnim"]);